conditions:
  - is non-facility
  - not exists:
    - XTENSION
  - set-date
  - matching:
    - TELESCOP: Gemini-South
    - TELESCOP: Gemini-North

include files:
  - pdu/flamingos
  - pdu/hokupaa
  - pdu/hrwfs
  - pdu/michelle
  - pdu/oscir
  - pdu/phoenix
  - pdu/trecs

keywords:
  - DATE
#  - DATE-OBS
  - OBSID
  - DATALAB
#  - FRAME
  - OBJECT
  - OBSCLASS:
    - char:   [ dayCal,  partnerCal,  acqCal,  acq,  science,  progCal ]
    - since:    2011-1-6
  - RELEASE:
    - date:     2000-1-1 .. *
  - IAA:
    - since:    2011-1-6
  - RAWGEMQA:
    - optional
    - char:   [ UNKNOWN, USABLE, BAD, CHECK ]
  - RAWPIREQ:
    - optional
    - char:   [ UNKNOWN, 'YES', 'NO', CHECK ]   # Using quotes to prevent YAML to turn this into booleans
  - RAWBG:
    - optional
    - char:     Any
    - upper:    UNKNOWN
    - pattern:  '\d{2}-percentile'
  - RAWCC:
    - optional
    - char:     Any
    - upper:    UNKNOWN
    - pattern:  '\d{2}-percentile'
  - RAWIQ:
    - optional
    - char:     Any
    - upper:    UNKNOWN
    - pattern:  '\d{2}-percentile'
  - RAWWV:
    - optional
    - char:     Any
    - upper:    UNKNOWN
    - pattern:  '\d{2}-percentile'

tests:
# Old images (previous to ~2005) miss IAA and OBSCLASS, which complicates
# testing. We move those to this instead
#  - valid-iaa-and-obsclass
# Checks GEMPRGID, OBSID, AND DATALAB
  - valid-observation-info
  - wcs-after-pdu
