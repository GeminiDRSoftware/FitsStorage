
{%- macro json_row(row) -%}
{
{%- for column in row.columns %}

{%- if column.key != 'download' -%}
  {%- if column.key == 'exposure_time' -%}
    {%- if column.text -%}
    "exposure_time": 0
    {%- else -%}
    "exposure_time": {{ column.text }}
    {%- endif -%}
  {%- elif column.text != None -%}
    "{{ column.key }}": "{{ column.text|e }}"
  {%- elif column.content != None -%}
    "{{ column.key }}": {%- if column.content.prop_message -%}"{{ column.content }}"
      {%- elif column.key == 'filename' -%}"{{ column.content.name }}"
      {%- elif column.key == 'data_label' -%}"{{ column.content.datalabel }}"
      {%- elif column.key == 'ut_datetime' -%}"{{ column.content.dp }} {{ column.content.tp }}"
      {%- elif column.key == 'instrument' -%}"{{ column.content.inst }}"
      {%- elif column.key == 'observation_class' -%}"{{ column.content.text }}"
      {%- elif column.key == 'observation_type' -%}"{{ column.content.text }}"
      {%- elif column.key == 'object' -%}"{{ column.content.name }}"
      {%- elif column.key == 'download' -%}"{{ column.content }}"
    {%- endif -%}
  {%- endif -%}
  {% if not loop.last %},
  {% endif %}
{%- endif %}
{%- endfor %}
}
{%- endmacro %}
{% if got_results %}
{% import "search_and_summary/summary_entries.macro" as generate %}
[
{% for row in data_rows %}
{{ json_row(row) }}
{% if not loop.last %},
{% endif %}
{% endfor %}
]
{%- endif %}
