{% extends "bootstrap_layout.html" %}

{% block title %}Ingest Queue{% endblock %}

{% block bootstrap_body %}
    <table class="table">
        <tr><th>Filename</th><th>In Progress</th><th>Failed</th><th>Added</th></tr>
        {% for iq in ingest_queue %}
        <tr><td>{{ iq.filename }}</td><td>{{ iq.in_progress }}</td><td>{{ iq.failed }}</td><td>{{ iq.added }}</td></tr>
        {% endfor %}
    </table>
    {% if num_pages > 1 %}
        {% if num_pages <= 5 %}
            {% for p in range(1,num_pages+1) %}
                {% if (page == p) %}
                {{ p }}
                {% else %}
                <a href="?page={{ p }}">{{ p }}</a>
                {% endif %}
            {% endfor %}
        {% elif page <= 4 %}
            {% for p in range(1,6) %}
                {% if (page == p) %}
                {{ p }}
                {% else %}
                <a href="?page={{ p }}">{{ p }}</a>
                {% endif %}
            {% endfor %}
            <a href="?page={{ num_pages }}">{{ num_pages}}</a>
        {% elif num_pages-page <= 4 %}
            <a href="?page=1">1</a>
            {% for p in range(5) %}
                {% if ((num_pages - 4 + p) == page) %}
                {{ page }}
                {% else %}
                <a href="?page={{ num_pages + p - 4 }}">{{ num_pages + p - 4 }}</a>
                {% endif %}
            {% endfor %}
        {% else %}
            <a href="?page=1">1</a>
            {% for p in range(5) %}
                {% if (p == 2) %}
                {{ page }}
                {% else %}
                <a href="?page={{ pag + p - 2 }}">{{ page + p - 2 }}</a>
                {% endif %}
            {% endfor %}
            <a href="?page={{ num_pages }}">{{ num_pages}}</a>
        {% endif %}
    {% endif %}
{% endblock %}